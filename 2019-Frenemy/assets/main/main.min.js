var ghostSearchkey="99efee9603c92e5cd04501f069",baiduTongJikey="37d3bf3116f041cb10bd1d890e65bcfc",leancloudAppId="rEDT0uBB2LEdndoJ4od2SlKf-gzGzoHsz",leancloudAppKey="lmX57j7hrYGCHROA72tBUIXq",leancloudServerURL="https://leancloud-api.iiong.com",googleAnalyticsId="UA-141063659-1",valineObject=void 0,valineOptions={el:"#vcomments",appId:leancloudAppId,appKey:leancloudAppKey,serverURLs:leancloudServerURL,notify:!0,verify:!0,avatar:"mm",visitor:!0,highlight:!0,recordIP:!0,placeholder:"请您理智发言，共建美好社会！",path:window.location.pathname};function createPagination(){var a=window.location.href,e=document.querySelector(".curr-page"),t=document.querySelector(".total-pages");if(e&&t){var n=Number.parseInt(e.textContent,10),i=Number.parseInt(t.textContent,10),o=document.querySelector(".pagination"),s=document.querySelector(".page-item");if(1<i){var l=[];pagination(n,i).forEach(function(e){var t=a.split("/");e===n?l.push('<li class="page-item active"><span class="page-link">'+e+"</span></li>"):"number"==typeof e?("page"===t[t.length-3]&&(a=a.replace(/\/page\/.*$/,"")+"/"),l.push('<li class="page-item"><a class="page-link" href="'+a+"page/"+e+'/" aria-label="第'+e+'页">'+e+"</a></li>")):l.push('<li class="page-item ellipsis"><a class="page-link">...</a></li>')}),null!==s&&(1===n?s.insertAdjacentHTML("beforebegin",l.join("")):s.insertAdjacentHTML("afterend",l.join("")))}else null!=o&&(o.style.display="none")}}function pagination(e,t){for(var a=[],n=Math.max(2,e-2);n<=Math.min(t-1,e+2);n++)a.push(n);return 2<e-2&&a.unshift("..."),e+2<t-1&&a.push("..."),a.unshift(1),a.push(t),a}function valineInit(){function e(){null!==document.getElementById("vcomments")&&(valineObject=new Valine(valineOptions))}if(0!==$("#vcomments").length){if(void 0!==window.Valine)return e();loadScript("//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js",function(){loadScript("https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js",function(){return e()})})}$.support.pjax&&$(document).on("click","a[search-pjax]",function(e){$.pjax.click(e,{container:".site-warp"}),$(".app-search-result").removeClass("active")})}function searchInit(){function e(){new GhostSearch({host:[location.protocol,"//",location.host].join(""),version:"v3",key:ghostSearchkey,url:[location.protocol,"//",location.host].join(""),trigger:"focus",defaultValue:"",options:{keys:["title","published_at","url"]},api:{parameters:{fields:["title","published_at","url"]}},template:function(e){var t=dayjs(e.published_at).format("YYYY年MM月DD日");return'<a search-pjax href="'+e.url+'" class="ghost-search-item"><h2>'+e.title+"</h2><span>发布日期："+t+"</span></a>"},on:{afterDisplay:function(e){var t=$(".search-meta"),a=t.attr("data-no-results-text");a=a.replace("[results]",e.total),t.text(a).show()}}}),$("#nav-top-search").keypress(function(e){13===e.which&&($(".app-search-result").addClass("active"),$("html").addClass("overflow-hidden"),$("#ghost-search-field").val($(this).val()).focus())}),$("#mobile-search").keypress(function(e){13===e.which&&($(".app-search-result").addClass("active"),$("html").addClass("overflow-hidden"),$("#ghost-search-field").val($(this).val()).focus())}),$(".search-close").click(function(){$(".app-search-result").removeClass("active"),$("#nav-top-search").val(""),$("html").removeClass("overflow-hidden")}),$.support.pjax&&$(document).on("click","a[search-pjax]",function(e){$.pjax.click(e,{container:".site-warp"}),$(".app-search-result").removeClass("active"),$("#nav-top-search").val(""),$("html").removeClass("overflow-hidden")})}0!==$("#ghost-search-field").length&&(void 0===window.GhostSearch?loadScript("//cdn.jsdelivr.net/npm/@tryghost/content-api/umd/content-api.min.js",function(){loadScript("//cdn.jsdelivr.net/npm/ghost-search/dist/ghost-search.min.js",function(){loadScript("//cdn.jsdelivr.net/npm/dayjs/dayjs.min.js",function(){e()})})}):e())}function watchSiteLink(){$(document).on("click","a",function(e){var t=e.target.href,a=e.target.hostname;/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(t)&&a!==window.location.hostname&&(e.preventDefault(),window.open(e.target.href))})}jQuery(document).ready(function(){"https"===window.location.protocol.split(":")[0]?loadScript("https://zz.bdstatic.com/linksubmit/push.js"):loadScript("http://push.zhanzhang.baidu.com/push.js"),loadScript("https://hm.baidu.com/hm.js?"+baiduTongJikey),loadScript("https://www.googletagmanager.com/gtag/js?id="+googleAnalyticsId,function(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",googleAnalyticsId)}),valineInit(),searchInit(),watchSiteLink(),createPagination(),log()});