{"version":3,"sources":["casper.js"],"names":["$","loadFiles","js","css","click","addClass","removeClass","window","location","hash","checkExist","setInterval","length","animate","scrollTop","offset","top","clearInterval","loadScript","fileName","callback","into","script","document","createElement","type","src","onload","push","getElementsByTagName","appendChild","body","loadCSS","rel","onreadystatechange","href","getElementById","Valine","el","appId","appKey","notify","verify","avatar","visitor","highlight","recordIP","placeholder","mediumZoom","querySelectorAll","attr","i","clazz","undefined","replace","Prism","plugins","autoloader","languages_path","highlightAll","map","item","index","adsbygoogle","console","log","loaded","remove","google_ad_client","enable_page_level_ads","gtag","dataLayer","arguments","Date","ready","returnTop","scroll","this","fadeIn","fadeOut","searchDom","GhostSearch","key","host","focus","blur","on","event","link","target","hostname","test","preventDefault","open","jQuery"],"mappings":"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","file":"casper.min.js","sourcesContent":["(function ($) {\n  var loadFiles = {\n    js: [],\n    css: []\n  };\n\n  /**\n   * 打开捐赠弹窗\n   */\n  $('#btn-modal').click(function () {\n    $('#overlay').addClass('is-visible');\n    $('#modal').addClass('is-visible animated fadeInDown').removeClass('fadeOutDown');\n    $('html').css('overflow-y', 'hidden');\n  });\n  /**\n   * 关闭捐赠弹窗\n   */\n  $('#close-btn').click(function () {\n    $('#overlay').removeClass('is-visible');\n    $('#modal').removeClass('is-visible animated fadeInDown').addClass('animated fadeOutDown');\n    $('html').css('overflow-y', 'scroll');\n  });\n  $('#overlay').click(function () {\n    $('#overlay').removeClass('is-visible');\n    $('#modal').removeClass('is-visible animated fadeInDown').addClass('animated fadeOutDown');\n    $('html').css('overflow-y', 'scroll');\n  });\n\n  /**\n   * 评论跳转\n   */\n  if (window.location.hash) {\n    var checkExist = setInterval(function () {\n      if ($(window.location.hash).length) {\n        $('html, body').animate(\n          {scrollTop: $(window.location.hash).offset().top - 90},\n          1000\n        );\n        clearInterval(checkExist);\n      }\n    }, 100);\n  }\n\n  /**\n   * 动态加载JS文件的方法\n   * Load javascript file method\n   *\n   * @param {String}   fileName              JS文件名\n   * @param {Function} [callback=function()] 加载成功后执行的回调函数\n   * @param {String}   [into='head']         嵌入页面的位置\n   */\n  function loadScript(fileName, callback, into) {\n    into = into || 'body';\n    callback = callback || function () {\n    };\n    var script = null;\n    script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = fileName;\n    script.onload = function () {\n      loadFiles.js.push(fileName);\n      callback();\n    };\n    if (into === 'head') {\n      document.getElementsByTagName('head')[0].appendChild(script);\n    } else {\n      document.body.appendChild(script);\n    }\n  }\n\n  /**\n   * 动态加载CSS文件的方法\n   * Load css file method\n   *\n   * @param {String}   fileName              CSS文件名\n   * @param {Function} [callback=function()] 加载成功后执行的回调函数\n   * @param {String}   [into='head']         嵌入页面的位置\n   */\n  function loadCSS(fileName, callback, into) {\n    into = into || 'head';\n    callback = callback || function () {\n    };\n\n    var css = document.createElement('link');\n    css.type = 'text/css';\n    css.rel = 'stylesheet';\n    css.onload = css.onreadystatechange = function () {\n      loadFiles.css.push(fileName);\n      callback();\n    };\n    css.href = fileName;\n    if (into === 'head') {\n      document.getElementsByTagName('head')[0].appendChild(css);\n    } else {\n      document.body.appendChild(css);\n    }\n  }\n\n  //valine评论支持\n  loadScript('https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js', function () {\n    loadScript(\n      'https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js',\n      function () {\n        if (document.getElementById('vcomments') !== null) {\n          new Valine({\n            el: '#vcomments',\n            appId: 'rEDT0uBB2LEdndoJ4od2SlKf-gzGzoHsz',\n            appKey: 'lmX57j7hrYGCHROA72tBUIXq',\n            notify: true,\n            verify: true,\n            avatar: 'mm',\n            visitor: true, // 文章访问量统计\n            highlight: true, // 代码高亮\n            recordIP: true, // 是否记录评论者IP\n            placeholder: '请您理智发言，共建美好社会！'\n          });\n        }\n      }\n    );\n  });\n  //图箱支持\n  loadScript('https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js', function () {\n    mediumZoom(document.querySelectorAll('.post-full-content .post-content img'));\n  });\n  //Prism高亮支持\n  // loadCSS('https://cdn.jsdelivr.net/npm/prismjs@1.15.0/themes/prism-tomorrow.min.css');\n  loadScript('https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js', function () {\n    loadScript('https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js', function () {\n        //将html代码块支持高亮\n        $('.post-content pre code').attr('class', function (i, clazz) {\n          if (clazz !== undefined) {\n            return clazz.replace(/language-html/g, 'language-markup');\n          }\n        });\n        //设置高亮语言样式文件地址\n        if (window.Prism !== 'undefined') {\n          Prism.plugins.autoloader.languages_path = 'https://cdn.jsdelivr.net/npm/prismjs/components/';\n          Prism.highlightAll();\n        }\n      }\n    );\n  });\n  //行号\n  loadCSS('https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css');\n  loadScript('https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js');\n  //支持行号显示\n  $('.post-content pre').addClass('line-numbers');\n  //显示语言或者粘贴\n  loadCSS('https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.css');\n  loadScript('https://cdn.jsdelivr.net/npm/prismjs/plugins/toolbar/prism-toolbar.min.js');\n  loadScript('https://cdn.jsdelivr.net/npm/prismjs/plugins/show-language/prism-show-language.min.js');\n  loadScript('https://cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js');\n  loadScript('https://cdn.jsdelivr.net/npm/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js');\n\n  // Google 广告配置\n  loadScript('https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js', function () {\n    $('.adsbygoogle[data-ad-client]').map(function (item, index) {\n      (adsbygoogle = window.adsbygoogle || []).push({});\n    });\n    console.log('Google广告加载完毕。嘤嘤嘤，别把本站广告屏蔽了哟！');\n    if (adsbygoogle.loaded || window.adsbygoogle.loaded) {\n      // 当谷歌广告没有被屏蔽的时候 - 删除提示语\n      $('.shielding-ads-tips').remove();\n    }\n  });\n  (adsbygoogle = window.adsbygoogle || []).push({\n    google_ad_client: \"ca-pub-5781009105744977\",\n    enable_page_level_ads: true\n  });\n\n  // Google分析\n  loadScript('https://www.googletagmanager.com/gtag/js?id=UA-141063659-1', function () {\n    window.dataLayer = window.dataLayer || [];\n\n    function gtag() {\n      dataLayer.push(arguments);\n    }\n\n    gtag('js', new Date());\n    gtag('config', 'UA-141063659-1');\n  });\n\n  // 百度统计\n  loadScript('https://hm.baidu.com/hm.js?37d3bf3116f041cb10bd1d890e65bcfc');\n\n  // 百度推送\n  loadScript('https://zz.bdstatic.com/linksubmit/push.js');\n\n  console.log('已经动态加载资源：', loadFiles);\n\n  $(document).ready(function () {\n    /**\n     * 回到顶部\n     */\n    var returnTop = $('#return-to-top');\n    $(window).scroll(function () {\n      if ($(this).scrollTop() >= 50) {\n        returnTop.fadeIn(200);\n      } else {\n        returnTop.fadeOut(200);\n      }\n    });\n    returnTop.click(function () {\n      $('body,html').animate(\n        {\n          scrollTop: 0\n        },\n        500\n      );\n    });\n\n    // 搜索事件执行\n    var searchDom = $('#ghost-search-field');\n    if (searchDom.length !== 0) {\n      // 配置搜索\n      var ghostSearch = new GhostSearch({\n        // key: '1c8b902ac09889962117d082e6',\n        // host: 'http://localhost:2368'\n        key: '99efee9603c92e5cd04501f069',\n        host: 'https://iiong.com'\n      });\n      searchDom.focus(function () {\n        $('#ghost-search-results').fadeIn(500);\n        $('.search-cover').fadeIn(500);\n        $('html').css('overflow-y', 'hidden')\n      }).blur(function () {\n        $('#ghost-search-results').fadeOut(500);\n        $('.search-cover').fadeOut(500);\n        $('html').css('overflow-y', 'scroll')\n      });\n    }\n\n    // 监听点击链接时间，非本站链接进行新标签打开\n    $(document).on(\"click\", 'a', function (event) {\n      var link = event.target.href; // 完整链接\n      var host = event.target.hostname;\n      if (/^https?:\\/\\/(([a-zA-Z0-9_-])+(\\.)?)*(:\\d+)?(\\/((\\.)?(\\?)?=?&?[a-zA-Z0-9_-](\\?)?)*)*$/i.test(link)) {\n        if (host !== window.location.hostname) {\n          event.preventDefault();\n          window.open(event.target.href);\n        }\n      }\n    });\n  });\n})(jQuery);\n"]}